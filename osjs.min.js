function Osjs(){this.write_key=null,this.anonymousId=null,this.userId=null,this.datas=[];var e=this;this.setOptions=function(s){s.write_key&&(e.write_key=s.write_key),s.anonymousId?e.anonymousId=s.anonymousId:e.anonymousId||(e.anonymousId=Math.floor(0xfffffffffffff*Math.random())),s.userId&&!e.userId&&(e.userId=s.userId)},this.xhr=function(s,t){if(!t.timestamp){var n=new Date,o=n.toISOString();t.timestamp=o}var u;u=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),console.log(JSON.stringify(t,null,4)),u.onreadystatechange=function(){4==u.readyState&&(200==u.status?e.sendQueue():e.queue(s,t))},u.open("POST",s,!0),u.setRequestHeader("Authorization","Basic "+btoa(e.write_key+":null")),u.setRequestHeader("Content-type","application/json"),u.send(JSON.stringify(t))},this.queue=function(s,t){var n=s.split("/").pop();t.action=n,e.datas.push(t)},this.sendQueue=function(){if(0!==e.datas.length){var s={batch:e.datas};e.datas=[];var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status);else for(var n=0;n<s.batch.length;n++)e.datas.push(s.batch[n])},t.open("POST","https://api.segment.io/v1/import",!0),t.setRequestHeader("Authorization","Basic "+btoa(e.write_key+":null")),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(s))}},this.identify=function(s){s.anonymousId||(s.anonymousId=e.anonymousId),!s.userId&&e.userId&&(s.userId=e.userId),e.xhr("https://api.segment.io/v1/identify",s)},this.group=function(s){s.anonymousId||(s.anonymousId=e.anonymousId),!s.userId&&e.userId&&(s.userId=e.userId),e.xhr("https://api.segment.io/v1/group",s)},this.track=function(s){s.anonymousId||(s.anonymousId=e.anonymousId),!s.userId&&e.userId&&(s.userId=e.userId),e.xhr("https://api.segment.io/v1/track",s)},this.page=function(s){s.anonymousId||(s.anonymousId=e.anonymousId),!s.userId&&e.userId&&(s.userId=e.userId),e.xhr("https://api.segment.io/v1/page",s)},this.screen=function(s){s.anonymousId||(s.anonymousId=e.anonymousId),!s.userId&&e.userId&&(s.userId=e.userId),e.xhr("https://api.segment.io/v1/screen",s)},this.alias=function(s){!s.userId&&e.userId&&(s.userId=e.userId),!s.previousId&&e.anonymousId&&(s.previousId=e.anonymousId),e.xhr("https://api.segment.io/v1/alias",s)}}var osjs=new Osjs;