function Osjs(){this.write_key=null,this.datas=[];var t=this;this.setOptions=function(e){e.write_key&&(t.write_key=e.write_key)},this.xhr=function(e,i){if(!i.timestamp){var s=new Date,n=s.toISOString();i.timestamp=n}var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){4==a.readyState&&(200==a.status?t.sendQueue():t.queue(e,i))},a.open("POST",e,!0),a.setRequestHeader("Authorization","Basic "+btoa(t.write_key+":null")),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(i))},this.queue=function(e,i){var s=e.split("/").pop();i.action=s,t.datas.push(i)},this.sendQueue=function(){if(0!==t.datas.length){var e={batch:t.datas};t.datas=[];var i;i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status);else for(var s=0;s<e.batch.length;s++)t.datas.push(e.batch[s])},i.open("POST","https://api.segment.io/v1/import",!0),i.setRequestHeader("Authorization","Basic "+btoa(t.write_key+":null")),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(e))}},this.identify=function(e){t.xhr("https://api.segment.io/v1/identify",e)},this.group=function(e){t.xhr("https://api.segment.io/v1/group",e)},this.track=function(e){t.xhr("https://api.segment.io/v1/track",e)},this.page=function(e){t.xhr("https://api.segment.io/v1/page",e)},this.screen=function(e){t.xhr("https://api.segment.io/v1/screen",e)},this.alias=function(e){t.xhr("https://api.segment.io/v1/alias",e)}}var osjs=new Osjs;